import{mkdir as e,writeFile as t}from"node:fs/promises";import n from"node:path";async function r(){console.log(`begin get`);let r=`https://raw.githubusercontent.com/wiki/Alvin9999/new-pac/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7.md`,i=await fetch(r,{method:`GET`});if(console.log(`header done`),!i.ok)throw Error(`请求失败：${i.status} ${i.statusText}`);let a=await i.text(),o=[...a.matchAll(/(?<=```bash\s*\n)([\s\S]*?)(?=\n```)/gm)].join(`
`);console.log(`body done`,o);let s=n.resolve(process.cwd(),`data`);await e(s,{recursive:!0});let c=n.join(s,`sub.txt`);await t(c,o,`utf8`),console.log(`✅ 已写入 ${c}`)}r().catch(e=>{console.error(`❌ 脚本执行出错：`,e),process.exit(1)});