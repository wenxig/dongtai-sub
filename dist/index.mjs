import{mkdir as e,writeFile as t}from"node:fs/promises";import n from"node:path";import{JSDOM as r}from"jsdom";async function i(){console.log(`begin get`);let i=`https://github.com/Alvin9999/new-pac/wiki/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7`,a=await fetch(i,{method:`GET`});if(console.log(`header done`),!a.ok)throw Error(`请求失败：${a.status} ${a.statusText}`);let{document:o}=new r(await a.text()).window,s=Array.from(o.querySelectorAll(`.highlight-source-shell`)).map(e=>e.textContent).join(`
`);console.log(`body done`,s);let c=n.resolve(process.cwd(),`data`);await e(c,{recursive:!0});let l=n.join(c,`sub.txt`);await t(l,s,`utf8`),console.log(`✅ 已写入 ${l}`)}i().catch(e=>{console.error(`❌ 脚本执行出错：`,e),process.exit(1)});