import{mkdir as e,writeFile as t}from"node:fs/promises";import n from"node:path";import{JSDOM as r}from"jsdom";async function i(){let i=[`https://github.com/Alvin9999-newpac/fanqiang/wiki/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7`,`https://github.com/Alvin9999-newpac/fanqiang/wiki/ss%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7`],a=await Promise.all(i.map(async e=>{let t=await fetch(e,{method:`GET`});if(console.log(`header done`),!t.ok)throw Error(`请求失败：${t.status} ${t.statusText}`);let{document:n}=new r(await t.text()).window;return Array.from(n.querySelectorAll(`.highlight-source-shell`)).map(e=>e.textContent)})),o=n.resolve(process.cwd(),`data`);await e(o,{recursive:!0});let s=n.join(o,`sub.txt`);await t(s,a.flat().join(`
`),`utf8`),console.log(`✅ 已写入 ${s}`)}i().catch(e=>{console.error(`❌ 脚本执行出错：`,e),process.exit(1)});